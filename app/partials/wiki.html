<header class="header-container" ng-include="'/partials/header.html'"></header>
<div class="middle-container container-fluid wiki">
    <div class="row-fluid" ng-show="!formOpened">
        <div class="span12">
            <div class="wiki-container" gm-render-markdown="content"></div>
            <div class="attachments" ng-show="attachments">
                <h3>Attachments</h3>
                <ul class="attachments-items">
                    <li class="attachments-item" ng-repeat="attachment in attachments">
                        <a href="{{ attachment.url }}">{{ attachment.attached_file }}</a>
                        <span>[{{ attachment.size|sizeFormat }}]</span>
                        <span>on {{ attachment.created_date|momentFormat:"LLL" }}</span>
                        <a href="" ng-click="deleteAttachment(attachment)">(remove)</a>
                    </li>
                </ul>
            </div>
            <div class="wiki-buttons">
                <a href="" class="button button-edit" ng-click="openEditForm()">Edit</a>
                <a href="" class="button button-delete" ng-click="deletePage()">Delete</a>
            </div>
        </div>
    </div>
    <div class="row-fluid" ng-show="formOpened">
        <div class="span12">
            <div class="wikiform-container">
                <textarea id="wiki" ng-model="content" gm-markitup></textarea>
            </div>
            <a class="add-attachment" data-icon="E" title="Add Attachment" href="" ng-hide="attachment"
               gm-forward-click="#attachment_file_input" >Add Attachments</a>
            <span data-icon="E" class="add-attachment" ng-show="attachment">
                {{ attachment.name }} [{{ attachment.size|sizeFormat }}]
                <a href="" ng-click="attachment = undefined">(remove)</a>
            </span>
            <input type="file" class="hidden" name="attachment" id="attachment_file_input"
                   gm-file ng-model="attachment" />
            <div class="wiki-buttons">
                <a href="" class="button button-success" ng-click="savePage()">Save</a>
                <a href="" class="button" ng-click="discartCurrentChanges()"
                   ng-show="page">Cancel</a>
            </div>
        </div>
    </div>
</div>
